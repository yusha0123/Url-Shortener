import{ag as p,a6 as f,a1 as h,a7 as j,r as b,a9 as y,j as e,ah as v,ab as N,ai as w,K as o,ao as A,aj as _,ak as M,al as E,am as I,O as P,an as S}from"./index-DRAgHsIT.js";import{j as k,A as L,c as q}from"./index-CjPgBJJY.js";import{a as C,b as U,c as z}from"./chunk-MW56SEHC-C_SpdkDN.js";const V=()=>{const{login:i}=p();return f({mutationFn:t=>j.post("/api/auth/register",t),onSuccess:({data:{token:t}})=>{h.success("Registration Successful!");const{email:n,username:l}=k(t);i(t,n,l)}})},F=()=>{var d,u,c;const[i,t]=b.useState(!1),{register:n,handleSubmit:l,formState:{errors:s}}=y({defaultValues:{username:"",email:"",password:""}}),a=V(),x=()=>t(r=>!r),g=async r=>{a.mutate(r)};return e.jsx("section",{className:"bg-gradient-1 h-[100dvh] flex items-center justify-center",children:e.jsxs(C,{className:"md:w-[30%]",children:[e.jsx(U,{className:"flex justify-center",children:e.jsx(v,{})}),e.jsx(N,{}),e.jsxs(z,{className:"w-full",children:[e.jsx("p",{className:"text-2xl tracking-tight font-bold text-gray-900 text-center",children:"Create your account"}),a.isError&&e.jsx(L,{message:(()=>{var r,m;return w(a.error)?((m=(r=a.error.response)==null?void 0:r.data)==null?void 0:m.message)||a.error.message||"Network error occurred":a.error instanceof Error?a.error.message:"An unexpected error occurred during signUp."})(),type:"error"}),e.jsxs("form",{className:"flex flex-col gap-y-4",onSubmit:l(g),children:[e.jsx(o,{type:"text",label:"Username",radius:"sm",labelPlacement:"outside",startContent:e.jsx(A,{className:"text-2xl text-default-400 pointer-events-none flex-shrink-0"}),...n("username",{required:"Username is required",minLength:{value:5,message:"Username must be at least 5 characters long"},maxLength:{value:20,message:"Username must be less than 20 characters long"}}),isInvalid:!!(s!=null&&s.username),errorMessage:(d=s==null?void 0:s.username)==null?void 0:d.message}),e.jsx(o,{type:"email",label:"Email",radius:"sm",labelPlacement:"outside",startContent:e.jsx(_,{className:"text-2xl text-default-400 pointer-events-none flex-shrink-0"}),...n("email",{required:"Email Address is required",pattern:{value:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,message:"please enter a valid email address"}}),isInvalid:!!(s!=null&&s.email),errorMessage:(u=s==null?void 0:s.email)==null?void 0:u.message}),e.jsx(o,{label:"Password",radius:"sm",labelPlacement:"outside",startContent:e.jsx(I,{className:"text-2xl text-default-400 pointer-events-none flex-shrink-0"}),endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:x,"aria-label":"toggle password visibility",children:i?e.jsx(M,{className:"text-2xl text-default-400 pointer-events-none"}):e.jsx(E,{className:"text-2xl text-default-400 pointer-events-none"})}),type:i?"text":"password",...n("password",{required:"Password is required",minLength:{value:8,message:"Password must be at least 8 characters"},pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,message:"Please choose a stronger password"}}),isInvalid:!!(s!=null&&s.password),errorMessage:(c=s==null?void 0:s.password)==null?void 0:c.message}),e.jsx(P,{color:"primary",radius:"sm",className:"mt-2",type:"submit",isLoading:a.isPending,children:"Register"})]})]}),e.jsxs(q,{className:"flex gap-2 justify-center text-sm px-2 text-gray-500 pt-2 pb-4",children:[e.jsx("p",{children:"Already have an account?"}),e.jsx(S,{className:"underline hover:text-blue-500 transition duration-300 ease-in-out",to:"/login",children:"Login now"})]})]})})};export{F as default};
