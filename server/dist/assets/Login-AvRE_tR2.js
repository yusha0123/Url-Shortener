import{ag as m,a6 as x,a7 as f,a1 as g,r as p,a9 as j,j as e,ah as b,ab as h,ai as y,K as l,aj as N,ak as w,al as v,am as E,O as _,an as A}from"./index-juVjt2tq.js";import{j as M,A as S,c as k}from"./index-hw0QH9x0.js";import{a as I,b as L,c as C}from"./chunk-MW56SEHC-BJzOqHZg.js";const P=()=>{const{login:t}=m();return x({mutationFn:a=>f.post("/api/auth/login",a),onSuccess:({data:{token:a}})=>{const{email:r,username:o}=M(a);g.success(`Welcome ${o}!`),t(a,r,o)}})},Z=()=>{const[t,a]=p.useState(!1),{register:r,handleSubmit:o,reset:d,formState:{errors:i}}=j({defaultValues:{email:"",password:""}}),s=P(),c=()=>a(n=>!n),u=async n=>{s.mutate(n,{onError:()=>d()})};return e.jsx("section",{className:"bg-gradient-1 h-[100dvh] flex items-center justify-center",children:e.jsxs(I,{className:"md:w-[30%]",children:[e.jsx(L,{className:"flex justify-center",children:e.jsx(b,{})}),e.jsx(h,{}),e.jsxs(C,{className:"w-full",children:[e.jsx("p",{className:"text-2xl tracking-tight font-bold text-gray-900 text-center",children:"Sign in to your account"}),s.isError&&e.jsx(S,{message:y(s.error)?s.error.response?.data?.message||s.error.message||"Network error occurred":s.error instanceof Error?s.error.message:"An unexpected error occurred during login.",type:"error"}),e.jsxs("form",{className:"flex flex-col gap-y-4",onSubmit:o(u),children:[e.jsx(l,{type:"email",label:"Email",radius:"sm",labelPlacement:"outside",startContent:e.jsx(N,{className:"text-2xl text-default-400 pointer-events-none flex-shrink-0"}),...r("email",{required:"Email Address is required",pattern:{value:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,message:"Email address is invalid"}}),isInvalid:!!i?.email,errorMessage:i?.email?.message}),e.jsx(l,{label:"Password",radius:"sm",labelPlacement:"outside",startContent:e.jsx(E,{className:"text-2xl text-default-400 pointer-events-none flex-shrink-0"}),endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:c,"aria-label":"toggle password visibility",children:t?e.jsx(w,{className:"text-2xl text-default-400 pointer-events-none"}):e.jsx(v,{className:"text-2xl text-default-400 pointer-events-none"})}),type:t?"text":"password",...r("password",{required:"Password is required"}),autoComplete:"off",isInvalid:!!i?.password,errorMessage:i?.password?.message}),e.jsx(_,{color:"primary",radius:"sm",className:"mt-2",type:"submit",isLoading:s?.isPending,children:"Login"})]})]}),e.jsxs(k,{className:"flex gap-2 justify-center text-sm px-2 text-gray-500 pt-2 pb-4",children:[e.jsx("p",{children:"New to TinyLink?"}),e.jsx(A,{className:"underline hover:text-blue-500 transition duration-300 ease-in-out",to:"/register",children:"Create an account"})]})]})})};export{Z as default};
